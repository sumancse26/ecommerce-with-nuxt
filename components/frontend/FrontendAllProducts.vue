<script setup>
    const { $axios } = useNuxtApp();

    const products = ref([]);
    const getProducts = async () => {
        try {
            const res = await $axios.get('/get-products');
            products.value = res.data.products;
        } catch (e) {
            console.log(e);
        }
    };
    onMounted(() => {
        getProducts();
    });
</script>

<template>
    <div class="section small_pt pb_70">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="heading_s1 text-center">
                        <h2>All Products</h2>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="tab-content">
                        <div
                            class="tab-pane fade show active"
                            id="arrival"
                            role="tabpanel"
                            aria-labelledby="arrival-tab">
                            <div class="row shop_container">
                                <div v-for="product in products" :key="product.id" class="col-lg-3 col-md-4 col-6">
                                    <div class="product">
                                        <div class="product_img">
                                            <a href="shop-product-detail.html">
                                                <img :src="product.image" alt="product_img1" />
                                            </a>
                                            <div class="product_action_box">
                                                <ul class="list_none pr_action_btn">
                                                    <li class="add-to-cart">
                                                        <a href="#"><i class="icon-basket-loaded"></i> Add To Cart</a>
                                                    </li>
                                                    <li>
                                                        <a href="shop-compare.html" class="popup-ajax"
                                                            ><i class="icon-shuffle"></i
                                                        ></a>
                                                    </li>
                                                    <li>
                                                        <a href="shop-quick-view.html" class="popup-ajax"
                                                            ><i class="icon-magnifier-add"></i
                                                        ></a>
                                                    </li>
                                                    <li>
                                                        <a href="#"><i class="icon-heart"></i></a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="product_info">
                                            <h6 class="product_title">
                                                <a href="shop-product-detail.html">Blue Dress For Woman</a>
                                            </h6>
                                            <div class="product_price">
                                                <span class="price">$45.00</span>
                                                <del>$55.25</del>
                                                <div class="on_sale">
                                                    <span>35% Off</span>
                                                </div>
                                            </div>
                                            <div class="rating_wrap">
                                                <div class="rating">
                                                    <div class="product_rate" style="width: 80%"></div>
                                                </div>
                                                <span class="rating_num">(21)</span>
                                            </div>
                                            <div class="pr_desc">
                                                <p>
                                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus
                                                    blandit massa enim. Nullam id varius nunc id varius nunc.
                                                </p>
                                            </div>
                                            <div class="pr_switch_wrap">
                                                <div class="product_color_switch">
                                                    <span class="active" data-color="#87554B"></span>
                                                    <span data-color="#333333"></span>
                                                    <span data-color="#DA323F"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>
